<?xml version="1.0" encoding="UTF-8"?>
<application>
    <!-- global.phase -->
    <list global="true" id="phase">
        <entry key="_BUILD_STRUCTURE_">0x1</entry>
        <entry key="_BUILD_CONTEXT_">0x2</entry>
        <entry key="_BUILD_FINISHED_">0x4</entry>
        <entry key="_BUILD_PLUGIN_FINISHED_">0x8</entry>
        <entry key="_FINAL_PLUGIN_CONTEXT_">0xFE</entry>
        <entry key="_FINAL_APPLICATION_CONTEXT_">0xFF</entry>
    </list>

    <!-- global.stages -->
    <list global="true" id="stages">
        <entry key="_STASHING_">stashing</entry>
        <entry key="_INHERIT_">inherit</entry>
        <entry key="_INSTANTIATE_">instantiate</entry>
        <entry key="_INJECT_">inject</entry>
        <entry key="_AOP_INITIALIZE">aop_initialize</entry>
        <entry key="_AOP_WIRE">aop_wire</entry>
        <entry key="_INITIALIZE_">initialize</entry>
        <entry key="_RUN_">run</entry>
        <entry key="_FINISH_SETUP_">finishing bean setup</entry>
    </list>

    <!-- Prototypes -->
    <class id="BaseAnnotationParser" src="/lib/parser/annotation/Base/BaseAnnotationParser.js" />
    <class id="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Bean/BeanAnnotationParser.js" />

    <!-- Esprima, Util, all externals -->
    <bean id="Esprima" src="esprima"/>
    <bean id="Util" src="util"/>
    <bean id="Path" src="path"/>
    <bean id="Lodash" src="lodash"/>
    <bean id="Estraverse" src="estraverse"/>
    <bean id="Bluebird" src="bluebird"/>
    <bean id="FS" src="fs"/>
    <bean id="Glob" src="glob" />
    <bean id="Toposort" src="toposort-class" />
    <bean id="Beautify" src="js-beautify" />
    <bean id="Wildcard" src="node-wildcard" />
    <bean id="Md5" src="MD5" />
    <bean id="CamelCase" src="camelcase" />
    <bean id="Doctrine" src="doctrine" />
    <bean id="PropertiesReader" src="properties" />
    <bean id="XML2js" src="xml2js" />
    <bean id="UuidV4" src="uuid/v4" />

    <!-- LogManager -->
    <bean id="LogManager" src="/lib/logging/LogManager.js" init="init">
        <property name="configFile" value="/Users/udogerhards/Documents/Bitbucket/nodejs-annotations/lib/configuration/log4js.json" />
    </bean>

    <!-- Helpers -->
    <bean id="StaticMemberExpressionIdentifierMatch" singleton="false" src="/lib/parser/helper/StaticMemberExpressionIdentifierMatch.js"/>
    <bean id="VariableDecorationStaticMemberExpressionIdentifierMatch" singleton="false" src="/lib/parser/helper/VariableDecorationStaticMemberExpressionIdentifierMatch.js"/>

    <!--Diagram painter -->
    <bean id="Diagram" singleton="false" src="/lib/diagram/diagramTool.js" />

    <!-- TokenParser -->
    <list id="TokenParser">
        <entry key="FunctionDeclaration">
            <bean src="/lib/parser/member/FunctionDeclaration/FunctionDeclarationParser.js"/>
        </entry>
        <entry key="MemberExpression">
            <bean src="/lib/parser/member/MemberExpression/MemberExpression.js"/>
        </entry>
        <entry key="Block">
            <bean src="/lib/parser/member/Block/BlockParser.js"/>
        </entry>
        <entry key="CallExpression">
            <bean src="/lib/parser/member/CallExpression/CallExpression.js"/>
        </entry>
        <entry key="ClassDeclaration">
            <bean src="/lib/parser/member/ClassDeclaration/ClassDeclarationParser.js"/>
        </entry>
        <entry key="ExpressionStatement">
            <bean src="/lib/parser/member/ExpressionStatement/ExpressionStatementParser.js"/>
        </entry>
        <entry key="Line">
            <bean src="/lib/parser/member/Line/LineParser.js"/>
        </entry>
        <entry key="MethodDefinition">
            <bean src="/lib/parser/member/MethodDefinition/MethodDefintionParser.js"/>
        </entry>
        <entry key="Property">
            <bean src="/lib/parser/member/Property/PropertyParser.js"/>
        </entry>
        <entry key="VariableDeclaration">
            <bean src="/lib/parser/member/VariableDeclaration/VariableDeclarationParser.js"/>
        </entry>
    </list>

    <!-- Properties Annotation Parser Processors -->
    <list id="PropertiesProcessors">
        <entry>
            <bean src ="/lib/parser/annotation/meta/Properties/Processor/JavaPropertiesProcessor.js">
                <property name="Promise">
                    <reference id="Bluebird" />
                </property>
                <property name="propertiesReader">
                    <reference id="PropertiesReader" />
                </property>
            </bean>
        </entry>
        <entry>
            <bean src ="/lib/parser/annotation/meta/Properties/Processor/JsonPropertiesProcessor.js">
                <property name="Promise">
                    <reference id="Bluebird" />
                </property>
            </bean>
        </entry>
        <entry>
            <bean src ="/lib/parser/annotation/meta/Properties/Processor/XMLPropertiesProcessor.js">
                <property name="Promise">
                    <reference id="Bluebird" />
                </property>
                <property name="fs">
                    <references id="FS" />
                </property>
                <property name="xml2js">
                    <references id="XML2js" />
                </property>
            </bean>
        </entry>
    </list>

    <bean id="PropertiesAnnotationParserInstance" inherits="BeanAnnotationParserPrototype" init="init" src="/lib/parser/annotation/meta/Properties/PropertiesParser.js">
        <property name="logManager">
            <reference id="LogManager" />
        </property>
        <property name="annotation">
            <reference id="Properties" />
        </property>
        <property name="glob">
            <reference id="Glob" />
        </property>
        <property name="path">
            <reference id="Path" />
        </property>
        <property name="fs">
            <reference id="FS" />
        </property>
        <property name="Promise">
            <reference id="Bluebird" />
        </property>
        <property name="camelcase">
            <reference id="CamelCase" />
        </property>
        <property name="processors">
            <reference id="PropertiesProcessors" />
        </property>
    </bean>

    <!-- Annotation classes -->
    <class id="Init" src="/lib/annotation/initialize/Init/InitAnnotationClass.js" />
    <class id="Qualifier" src="/lib/annotation/inject/Qualifier/QualifierAnnotationClass.js" />
    <class id="Bean" src="/lib/annotation/instance/Bean/BeanAnnotationClass.js" />
    <class id="Resource" src="/lib/annotation/instance/Resource/ResourceAnnotationClass.js" />
    <class id="After" src="/lib/annotation/aop/After/AfterAnnotationClass.js" />
    <class id="Aspect" src="/lib/annotation/aop/Aspect/AspectAnnotationClass.js" />
    <class id="Before" src="/lib/annotation/aop/Before/BeforeAnnotationClass.js" />
    <class id="PointCut" src="/lib/annotation/aop/PointCut/PointCutAnnotationClass.js" />
    <class id="Inherits" src="/lib/annotation/inherits/Inherits/InheritsAnnotationClass.js" />
    <class id="Autowire" src="/lib/annotation/inject/Autowire/AutowireAnnotationClass.js"/>
    <class id="Inject" src="/lib/annotation/inject/Inject/InjectAnnotationClass.js"/>
    <class id="Store" src="/lib/annotation/inject/Store/StoreAnnotationClass.js" />
    <class id="Component" src="/lib/annotation/instance/Component/ComponentAnnotationClass.js" />
    <class id="Configuration" src="/lib/annotation/instance/Configuration/ConfigurationAnnotationClass.js" />
    <class id="Context" src="/lib/annotation/instance/Context/ContextAnnotationClass.js" />
    <class id="Controller" src="/lib/annotation/instance/Controller/ControllerAnnotationClass.js" />
    <class id="Prototype" src="/lib/annotation/instance/Prototype/PrototypeAnnotationClass.js" />
    <class id="Service" src="/lib/annotation/instance/Service/ServiceAnnotationClass.js" />
    <class id="Param" src="/lib/annotation/JSDoc/paramAnnotationClass.js" />
    <class id="Type" src="/lib/annotation/JSDoc/typeAnnotationClass.js" />
    <class id="Namespace" src="/lib/annotation/meta/Namespace/NamespaceAnnotationClass.js" />
    <class id="Properties" src="/lib/annotation/meta/Properties/PropertiesAnnotationClass.js" />
    <class id="Run" src="/lib/annotation/run/Run/RunAnnotationClass.js" />

    <!-- Parser helper classes -->
    <class id="MainBeanLoader" src="/lib/parser/annotation/instance/Bean/MainBeanLoader.js" />
    <class id="SubBeanLoader" src="/lib/parser/annotation/instance/Bean/SubBeanLoader.js" />

    <!-- AnnotationParser -->
    <list id="AnnotationParser">
        <entry key="BeanAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/instance/Bean/BeanAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="MainBeanLoader">
                    <reference id="MainBeanLoader" />
                </property>
                <property name="SubBeanLoader">
                    <reference id="SubBeanLoader" />
                </property>
                <property name="annotation">
                    <reference id="Bean" />
                </property>
            </bean>
        </entry>
        <entry key="ResourceAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Resource/ResourceParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Resource" />
                </property>
                <property name="util">
                    <reference id="Util" />
                </property>
                <property name="uuidV4">
                    <reference id="UuidV4" />
                </property>
            </bean>
        </entry>
        <entry key="QualifierAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/inject/Qualifier/QualifierAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Qualifier" />
                </property>
                <property name="util">
                    <reference id="Util" />
                </property>
            </bean>
        </entry>
        <entry key="InitAnnotation">
            <bean inherits="BaseAnnotationParser" test="true" src="/lib/parser/annotation/initialize/Init/InitAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Init" />
                </property>
                <property name="util">
                    <reference id="Util" />
                </property>
            </bean>
        </entry>
        <entry key="AfterAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/aop/After/AfterAnnotationParser.js" >
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="After" />
                </property>
            </bean>
        </entry>
        <entry key="AspectAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/aop/Aspect/AspectAnnotationParser.js" >
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Aspect" />
                </property>
            </bean>
        </entry>
        <entry key="BeforeAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/aop/Before/BeforeAnnotationParser.js" >
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Before" />
                </property>
            </bean>
        </entry>
        <entry key="PointCuteAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/aop/PointCut/PointCutAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="PointCut" />
                </property>
                <property name="wildcard">
                    <reference id="Wildcard" />
                </property>
                <property name="md5">
                    <reference id="Md5" />
                </property>
            </bean>
        </entry>
        <entry key="InheritsAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/inherits/inherits/InheritsAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Inherits" />
                </property>
                <property name="util">
                    <reference id="Util" />
                </property>
            </bean>
        </entry>
        <entry key="AutowireAnnotation">
            <bean src="/lib/parser/annotation/inject/Autowire/AutowireAnnotationParser.js" >
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Autowire" />
                </property>
                <property name="camelcase">
                    <reference id="CamelCase" />
                </property>
                <property name="QualifierAnnotation">
                    <reference id="Qualifier" />
                </property>
            </bean>
        </entry>
        <entry key="StoreAnnotation">
            <bean src="/lib/parser/annotation/inject/Store/StoreAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Store" />
                </property>
                <property name="util">
                    <reference id="Util" />
                </property>
            </bean>
        </entry>
        <entry key="ComponentAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Component/ComponentParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Component" />
                </property>
            </bean>
        </entry>
        <entry key="ConfigurationAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Configuration/ConfigurationParser.js" >
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Configuration" />
                </property>
            </bean>
        </entry>
        <entry key="ContextAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Context/ContextParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Context" />
                </property>
            </bean>
        </entry>
        <entry key="ControllerAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Controller/ControllerParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Controller" />
                </property>
            </bean>
        </entry>
        <entry key="PrototypeAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/instance/Prototype/PrototypeAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Prototype" />
                </property>
            </bean>
        </entry>
        <entry key="ResourceAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/instance/Resource/ResourceParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Resource" />
                </property>
                <property name="util">
                    <reference id="Util" />
                </property>
            </bean>
        </entry>
        <entry key="ServiceAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/instance/Service/ServiceParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Service" />
                </property>
            </bean>
        </entry>
        <entry key="ParamAnnotation">
            <bean src="/lib/parser/annotation/JSDoc/paramParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Param" />
                </property>
                <property name="expressionParser">
                    <reference id="ExpressionStatement" />
                </property>
                <property name="doctrine">
                    <reference id="Doctrine" />
                </property>
            </bean>
        </entry>
        <entry key="TypeAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/annotation/JSDoc/typeAnnotationClass.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Type" />
                </property>
                <property name="expressionParser">
                    <reference id="ExpressionStatement" />
                </property>
                <property name="doctrine">
                    <reference id="Doctrine" />
                </property>
            </bean>
        </entry>
        <entry key="NamespaceAnnotation">
            <bean inherits="BeanAnnotationParserPrototype" src="/lib/parser/annotation/meta/Namespace/NamespaceParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Namespace" />
                </property>
            </bean>
        </entry>
        <entry key="PropertiesAnnotation">
            <reference id="PropertiesAnnotationParserInstance" />
        </entry>
        <entry key="RunAnnotation">
            <bean inherits="BaseAnnotationParser" src="/lib/parser/annotation/run/Run/RunAnnotationParser.js">
                <property name="logManager">
                    <reference id="LogManager" />
                </property>
                <property name="annotation">
                    <reference id="Run" />
                </property>
            </bean>
        </entry>
    </list>

    <!-- DependencyBuilder -->
    <bean id="DependencyBuilder" init="init" src="/lib/dependency/DependencyBuilder.js">
        <property name="logManager">
            <reference id="LogManager" />
        </property>
        <property name="glob">
            <reference id="Glob" />
        </property>
        <property name="_">
            <reference id="Lodash" />
        </property>
        <property name="toposort">
            <reference id="Toposort" />
        </property>
        <property name="util">
            <reference id="Util" />
        </property>
        <property name="path">
            <reference id="Path" />
        </property>
    </bean>

    <!-- StructureParser -->
    <bean id="StructureParser" init="init" src="/lib/parser/structure/StructureParser.js">
        <property name="logManager">
            <reference id="LogManager" />
        </property>
        <property name="annotationParser">
            <reference id="AnnotationParser"/>
        </property>
        <property name="expressionParser">
            <reference id="TokenParser"/>
        </property>
        <property name="removeTokens">
            <list>
                <entry>BlockStatement></entry>
                <entry>AssignmentExpression</entry>
                <entry>Identifier</entry>
                <entry>Literal</entry>
                <entry>ClassBody</entry>
                <entry>ClassExpression</entry>
            </list>
        </property>
        <property name="beautify">
            <reference id="Beautify" />
        </property>
        <property name="_">
            <reference id="Lodash" />
        </property>
        <property name="util">
            <reference id="Util"/>
        </property>
        <property name="esprima">
            <reference id="Esprima"/>
        </property>
        <property name="estraverse">
            <reference id="Estraverse"/>
        </property>
        <property name="uuidV4">
            <reference id="UuidV4" />
        </property>
        <property name="removeLocationInformation">
            <value>true</value>
        </property>
        <property name="lightTokenInformation">
            <value>true</value>
        </property>
    </bean>

    <!-- ContextBuilder -->
    <bean id="ContextBuilder" init="init" src="/lib/context/ContextBuilder.js">
        <property name="logManager">
            <reference id="LogManager" />
        </property>
        <property name="annotationParser">
            <reference id="AnnotationParser"/>
        </property>
        <property name="stages">
            <reference id="stages"/>
        </property>
        <property name="promise">
            <reference id="Bluebird"/>
        </property>
    </bean>

    <!-- Factory -->
    <context id="Factory" init="init" src="/lib/factory/Factory.js">
        <property name="logManager">
            <reference id="LogManager" />
        </property>
        <property name="stages">
            <reference id="stages"/>
        </property>
        <property name="dependencyBuilder">
            <reference id="DependencyBuilder"/>
        </property>
        <property name="esprima">
            <reference id="Esprima"/>
        </property>
        <!--
        <property name="_">
            <reference id="Lodash"/>
        </property>
        -->
        <property name="path">
            <reference id="Path"/>
        </property>
        <property name="estraverse">
            <reference id="Estraverse"/>
        </property>
        <property name="uuidV4">
            <reference id="UuidV4" />
        </property>
    </context>
</application>